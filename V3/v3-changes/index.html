



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://bilal-fazlani.github.io/commanddotnet/V3/v3-changes/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>v3 Changes - CommandDotNet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../commanddotnet/superfences.css">
    
      <link rel="stylesheet" href="../../superfences.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-39358317-3", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="pink">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#v3-changes" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://bilal-fazlani.github.io/commanddotnet" title="CommandDotNet" class="md-header-nav__button md-logo">
          
            <img src="../../img/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              CommandDotNet
            </span>
            <span class="md-header-nav__topic">
              
                v3 Changes
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/bilal-fazlani/commanddotnet/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    bilal-fazlani/commanddotnet
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://bilal-fazlani.github.io/commanddotnet" title="CommandDotNet" class="md-nav__button md-logo">
      
        <img src="../../img/logo.png" width="48" height="48">
      
    </a>
    CommandDotNet
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/bilal-fazlani/commanddotnet/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    bilal-fazlani/commanddotnet
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Defining Commands
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Defining Commands
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../parameters/" title="Parameters" class="md-nav__link">
      Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../attributes/" title="Attributes" class="md-nav__link">
      Attributes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../constructors/" title="Constructors" class="md-nav__link">
      Constructors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../default-method/" title="Default method" class="md-nav__link">
      Default method
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../default-values/" title="Default values" class="md-nav__link">
      Default values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../collections/" title="Collections" class="md-nav__link">
      Collections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../argument-models/" title="Argument Models" class="md-nav__link">
      Argument Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../async-methods/" title="Async methods" class="md-nav__link">
      Async methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-return-codes/" title="Custom return codes" class="md-nav__link">
      Custom return codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../nesting-commands/" title="Nesting commands" class="md-nav__link">
      Nesting commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../exceptions/" title="Exceptions" class="md-nav__link">
      Exceptions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Extras
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Extras
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../directives/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent-validation-for-argument-models/" title="Fluent validation for parameters" class="md-nav__link">
      Fluent validation for parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Extensibility
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Extensibility
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dependency-injection/" title="Dependency Injection" class="md-nav__link">
      Dependency Injection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../parameter-types/" title="Parameter types" class="md-nav__link">
      Parameter types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-interceptors/" title="Custom interceptors" class="md-nav__link">
      Custom interceptors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      v3
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        v3
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        v3 Changes
      </label>
    
    <a href="./" title="v3 Changes" class="md-nav__link md-nav__link--active">
      v3 Changes
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-the-changes" title="What are the changes?" class="md-nav__link">
    What are the changes?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-architecture" title="New architecture" class="md-nav__link">
    New architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arguments-terminology" title="Arguments terminology" class="md-nav__link">
    Arguments terminology
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constructor-based-dependency-injection-is-now-possible" title="Constructor based dependency injection is now possible" class="md-nav__link">
    Constructor based dependency injection is now possible
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-of-new-features" title="Summary of new features" class="md-nav__link">
    Summary of new features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes" title="Breaking Changes" class="md-nav__link">
    Breaking Changes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appsettings-configuration" title="AppSettings &amp; Configuration" class="md-nav__link">
    AppSettings &amp; Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interceptor-methods" title="Interceptor Methods" class="md-nav__link">
    Interceptor Methods
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interceptor-methods-replace-constructor-options" title="Interceptor Methods replace Constructor Options" class="md-nav__link">
    Interceptor Methods replace Constructor Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interceptor-methods-scope-includes-all-ancestor-commands" title="Interceptor Methods scope includes all ancestor commands" class="md-nav__link">
    Interceptor Methods scope includes all ancestor commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandinvoker-removed" title="CommandInvoker removed" class="md-nav__link">
    CommandInvoker removed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remaining-work" title="Remaining work" class="md-nav__link">
    Remaining work
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../middleware/" title="Middleware Pipeline" class="md-nav__link">
      Middleware Pipeline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cancellation/" title="Ctrl+C and CancellationToken" class="md-nav__link">
      Ctrl+C and CancellationToken
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../interceptors/" title="Interceptor methods" class="md-nav__link">
      Interceptor methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../parameter-resolvers/" title="Parameter Resolvers" class="md-nav__link">
      Parameter Resolvers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../piped-arguments/" title="Piped Arguments" class="md-nav__link">
      Piped Arguments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../response-files/" title="Response Files" class="md-nav__link">
      Response Files
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-the-changes" title="What are the changes?" class="md-nav__link">
    What are the changes?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-architecture" title="New architecture" class="md-nav__link">
    New architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arguments-terminology" title="Arguments terminology" class="md-nav__link">
    Arguments terminology
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constructor-based-dependency-injection-is-now-possible" title="Constructor based dependency injection is now possible" class="md-nav__link">
    Constructor based dependency injection is now possible
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-of-new-features" title="Summary of new features" class="md-nav__link">
    Summary of new features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes" title="Breaking Changes" class="md-nav__link">
    Breaking Changes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appsettings-configuration" title="AppSettings &amp; Configuration" class="md-nav__link">
    AppSettings &amp; Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interceptor-methods" title="Interceptor Methods" class="md-nav__link">
    Interceptor Methods
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interceptor-methods-replace-constructor-options" title="Interceptor Methods replace Constructor Options" class="md-nav__link">
    Interceptor Methods replace Constructor Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interceptor-methods-scope-includes-all-ancestor-commands" title="Interceptor Methods scope includes all ancestor commands" class="md-nav__link">
    Interceptor Methods scope includes all ancestor commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandinvoker-removed" title="CommandInvoker removed" class="md-nav__link">
    CommandInvoker removed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remaining-work" title="Remaining work" class="md-nav__link">
    Remaining work
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bilal-fazlani/commanddotnet/edit/master/docs/V3/v3-changes.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="v3-changes">v3 Changes<a class="headerlink" href="#v3-changes" title="Permanent link">#</a></h1>
<p>v3 is a significant rewrite of the CommandDotNet.</p>
<p>The framework has remained mostly backward compatible for basic scenarios. 
Anything beyond basic scenarios will encounter a breaking change.</p>
<p>We welcome everyones help in testing the changes, providing usability feedback, bugs, missing documentation, etc.</p>
<p>Given the scope of changes, it's likely something is missed in this doc. If you notice something, please create an issue or submit a pull request for the docs.  Thank you.</p>
<h2 id="what-are-the-changes">What are the changes?<a class="headerlink" href="#what-are-the-changes" title="Permanent link">#</a></h2>
<h3 id="new-architecture">New architecture<a class="headerlink" href="#new-architecture" title="Permanent link">#</a></h3>
<p>The architecture is not based around a <a href="../middleware/">middleware pipeline</a>.</p>
<h3 id="arguments-terminology">Arguments terminology<a class="headerlink" href="#arguments-terminology" title="Permanent link">#</a></h3>
<p>Terminology for arguments has been updated and made more consistent throughout the framework.  <a href="http://www.informit.com/articles/article.aspx?p=175771">This article</a> describes how <code class="codehilite"><span class="n">argument</span></code> is an overloaded term.  It can mean all of the words after the name of the application name or just the words that are not commands.</p>
<p>We now recognize there are two different contexts with different needs.</p>
<ol>
<li>
<p>The user of the console app: needs to understand when arguments are named vs positional. We should strive to use terms they are already familiar with.</p>
</li>
<li>
<p>The developer of the console app: needs to define arguments that are named vs positional. Occasionally the developers need to operate across both types of arguments regardless of the type.</p>
</li>
</ol>
<p>We've addressed both. Now, there are two types of arguments; options and operands. And, there are two ways to define them; parameters and properties. Options are always named and Operands are always positional.  Pararmeter is no longer an overloaded term for argument.</p>
<p>Determining what should be an option vs operand can be confusing. One approach is to consider <a href="https://en.wikipedia.org/wiki/Operand">operands</a> <code class="codehilite"><span class="n">what</span></code> the command operates on and options inform <code class="codehilite"><span class="n">how</span></code> the command operates on them, as described in the article from above.  For example, In the <a href="../interceptors/">calculator here</a>, <code class="codehilite"><span class="n">x</span></code> and <code class="codehilite"><span class="n">y</span></code> are the operands and <code class="codehilite"><span class="c1">--radix</span></code> informs how the numbers are represented in the operations.</p>
<p>The user's interface with the app is the help documentation where we still use the terms command, option and argument. This is the more common terminology in help documentation of existing apps and so the user is likely more familiar with it. We don't expect users to understand what an operand is.</p>
<h3 id="constructor-based-dependency-injection-is-now-possible">Constructor based dependency injection is now possible<a class="headerlink" href="#constructor-based-dependency-injection-is-now-possible" title="Permanent link">#</a></h3>
<p><a href="#interceptor-methods">read more below</a></p>
<h2 id="summary-of-new-features">Summary of new features<a class="headerlink" href="#summary-of-new-features" title="Permanent link">#</a></h2>
<ul>
<li><a href="../response-files/">Response file</a> support </li>
<li><code class="codehilite"><span class="n">HelpTextProvider</span></code> can be overridden to make targetted changes to a section of help.</li>
<li>Test tools, helpful for end-to-end test and testing framework extensions, like middleware components. (available soon)</li>
<li>List operands can be populated from <a href="../piped-arguments/">piped arguments</a>.</li>
<li><a href="../parameter-resolvers/">Parameter resolvers</a></li>
<li><a href="../cancellation/">Ctrl+C support</a> with CancellationToken </li>
</ul>
<p>Several bugs were fixed along the way.</p>
<h2 id="breaking-changes">Breaking Changes<a class="headerlink" href="#breaking-changes" title="Permanent link">#</a></h2>
<p>We initially tried to roll out this update in backward compatible phases. Due to the scope of changes, that proved more burdonsome that it was worth. We decided the benefits were worth the price of breaking changes. Hopefully you'll agree... maybe not during the update, but shortly there after. <img alt="😄" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f604.svg" title=":smile:" /></p>
<p>In some cases, i.e. renamed attributes, the old method or class has been marked with <code class="codehilite"><span class="o">[</span><span class="n">Obsolete</span><span class="o">]</span><span class="w"></span></code> and warnings will suggest how to upgrade.  These will be removed in the next major release, <code class="codehilite"><span class="mi">4</span><span class="p">.</span><span class="n">x</span></code></p>
<p>There are a set of changes your IDE should be able to help you with.  For example, namespaces were updated to reflect their functional purpose. Your IDE will likely suggest the fixes and then you can remove the old namespaces. </p>
<h3 id="appsettings-configuration">AppSettings &amp; Configuration<a class="headerlink" href="#appsettings-configuration" title="Permanent link">#</a></h3>
<p>Fluent validation, prompting for missing arguments and fluent validation are no longer enabled by default.  Use these configuration extensions to enable them: <code class="codehilite"><span class="n">UseVersionMiddleware</span></code>, <code class="codehilite"><span class="n">UsePromptForMissingOperands</span></code>, and <code class="codehilite"><span class="n">UseFluentValidation</span></code></p>
<h3 id="interceptor-methods">Interceptor Methods<a class="headerlink" href="#interceptor-methods" title="Permanent link">#</a></h3>
<h4 id="interceptor-methods-replace-constructor-options">Interceptor Methods replace Constructor Options<a class="headerlink" href="#interceptor-methods-replace-constructor-options" title="Permanent link">#</a></h4>
<p>Constructor-based dependency injection was not possible because of the feature using constructors to define options that can be used for all subcommands defined in that class prevented</p>
<p>Those constructors will need to be replaced with interceptor methods.  There are two signatures for interceptor methods.</p>
<p><code class="codehilite"><span class="nv">Task</span><span class="o">&lt;</span><span class="nv">int</span><span class="o">&gt;</span> <span class="nv">Inteceptor</span><span class="ss">(</span><span class="nv">CommandContext</span> <span class="nv">ctx</span>, <span class="nv">ExecutionDelegate</span> <span class="k">next</span>, ...<span class="ss">)</span></code></p>
<p>and</p>
<p><code class="codehilite"><span class="nv">Task</span><span class="o">&lt;</span><span class="nv">int</span><span class="o">&gt;</span> <span class="nv">Inteceptor</span><span class="ss">(</span><span class="nv">InterceptorExecutionDelegate</span> <span class="k">next</span>, ...<span class="ss">)</span></code></p>
<p>The method name does not matter.  What does matter is the <code class="codehilite"><span class="n">Task</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span></code> type and use of either <code class="codehilite"><span class="n">ExecutionDelegate</span></code>.  The former requires a <code class="codehilite"><span class="n">CommandContext</span></code>. Options can be defined in these methods but are not required.</p>
<h4 id="interceptor-methods-scope-includes-all-ancestor-commands">Interceptor Methods scope includes all ancestor commands<a class="headerlink" href="#interceptor-methods-scope-includes-all-ancestor-commands" title="Permanent link">#</a></h4>
<p>Previously with constructor options, when there were multiple levels of subcommands, only the constructor option for the class of the target command was executed.
This can lead to a confusing experience where a parent command defines options but they aren't used because a subcommand of a subcommand has been requested.</p>
<p>As an example, let's say we have a console app <code class="codehilite"><span class="n">api</span><span class="p">.</span><span class="n">exe</span></code> for an api and the app mimics the RESTful design of the api. </p>
<p>The commands are:</p>
<ul>
<li><code class="codehilite"><span class="n">api</span><span class="p">.</span><span class="n">exe</span></code> - the root app, with a constructor defining the option <code class="codehilite"><span class="c1">--url</span></code></li>
<li><code class="codehilite"><span class="n">users</span></code> - command from a nested class</li>
<li><code class="codehilite"><span class="n">list</span></code> - a method to list the users</li>
</ul>
<p>Usage: <code class="codehilite"><span class="n">api</span><span class="p">.</span><span class="n">exe</span> <span class="c1">--url api-url users ls</span></code></p>
<p>This example would not work in v2 because the --url option, defined in the API class would never be called.  </p>
<p>v3 fixes this by keeping a pipeline of all interceptors.</p>
<p>If you need the old behavior, use the following code to keep only the interceptor in the same class as the target command. </p>
<div class="codehilite"><pre><span></span><span class="n">appRunner</span><span class="p">.</span><span class="n">Configure</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">UseMiddleware</span><span class="p">((</span><span class="n">ctx</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">pipeline</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">InvocationPipeline</span><span class="p">;</span>
    <span class="n">pipeline</span><span class="p">.</span><span class="n">AncestorInterceptors</span> <span class="p">=</span> <span class="n">pipeline</span><span class="p">.</span><span class="n">All</span>
        <span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">Invocation</span><span class="p">.</span><span class="n">MethodInfo</span><span class="p">.</span><span class="n">DeclaringType</span> <span class="p">==</span> <span class="n">pipeline</span><span class="p">.</span><span class="n">TargetCommand</span><span class="p">.</span><span class="n">Invocation</span><span class="p">.</span><span class="n">MethodInfo</span><span class="p">.</span><span class="n">DeclaringType</span><span class="p">)</span>
        <span class="p">.</span><span class="n">ToList</span><span class="p">();</span>
    <span class="k">return</span> <span class="nf">next</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
<span class="p">},</span> <span class="n">MiddlewareStages</span><span class="p">.</span><span class="n">PostParseInputPreBindValues</span><span class="p">));</span>
</pre></div>

<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">#</a></h3>
<p>Use <code class="codehilite"><span class="n">AppRunner</span><span class="p">.</span><span class="n">Configure</span></code> for any configuration not located in AppSettings. This includes setting a custom help text provider, dependency resolver, etc.</p>
<h3 id="commandinvoker-removed">CommandInvoker removed<a class="headerlink" href="#commandinvoker-removed" title="Permanent link">#</a></h3>
<p>The middleware pipeline architecture obsoleted the CommandInvoker. Look at the <code class="codehilite"><span class="n">CommandInvokerTests</span></code> in the repo to see how the feature can be implemented using middleware. Where the CommandInvoker only worked for the command method, the new architecture allows interogating all of the interceptor methods too.</p>
<h2 id="remaining-work">Remaining work<a class="headerlink" href="#remaining-work" title="Permanent link">#</a></h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> external dependencies<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> move FluentValidation into a separate nuget package</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> move Humanizer into a separate nuget package</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> update CommandDotNet.Ioc... repos</li>
</ul>
</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> make test tools available via nuget</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> complete features<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> RemainingOperands</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> SeparatedArguments</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> argument arity<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> define it with argument</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> display it in help</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> validate it</li>
</ul>
</li>
</ul>
</li>
</ul>
                
                  
                
              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://bilal-fazlani.github.io/commanddotnet/V3/v3-changes/";
      this.page.identifier =
        "/V3/v3-changes/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//command-dot-net.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../custom-interceptors/" title="Custom interceptors" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Custom interceptors
              </span>
            </div>
          </a>
        
        
          <a href="../middleware/" title="Middleware Pipeline" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Middleware Pipeline
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/bilal-fazlani" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/bilal_fazlani" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/in/bilal-fazlani/" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>